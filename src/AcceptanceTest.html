<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AcceptanceTest</title>
    <link rel="stylesheet" href="css/qunit-1.13.0.css">
</head>
<script src="js/component/ComponentRepository.js"></script>
<script src="js/component/AbstractionProxy.js"></script>
<script src="js/component/Control.js"></script>
<script src="js/common/HttpClient.js"></script>
<script src="js/view/2_Presentation.js"></script>
<script src="js/view/4_TransitionManager.js"></script>
<script src="js/view/5_Widget.js"></script>
<script src="js/view/1_Application.js"></script>
<script src="js/common/Id.js"></script>
<script src="js/common/Assert.js"></script>
<script>

    var app;

    TestPresentation1 = Object.create(Presentation, {
        initialize: { value: function(control) {
            Presentation.initialize.call(this, control);
            this.elem.innerHTML = "load completed!: widget1"; }}
    });

    TestPresentation2 = Object.create(Presentation, {
        initialize: { value: function(control) {
        Presentation.initialize.call(this, control);
        this.elem.innerHTML = "load completed!: widget2"; }}
    });

    window.addEventListener("load", function() {
        app = Application.create("app1", document.querySelector("#containerElem"), {
            widget1: function(id, elem, repository) {
                var widget1 = Widget.create(id, elem, repository);
                widget1
                .defineComponents({
                "model1": function(id) {
                    return AbstractionProxy.create(id, {
                        Id.on("view1").start: Id.on(id).load()
                    },"contents"); },
                "view1": function(id, elem) {
                    return TestPresentation1.create(elem.querySelector(".control1"), id);} })
                .defineControls({
                "control1": function(id, widget) { return Control.create("control1", widget, this.get("view1", widget.elem), this.get("model1")); } });

                return widget1;
            },
            widget2: function(id, elem, repository) {
                var widget2 = Widget.create(id, elem, repository);
                widget2
                .defineComponents({
                "model2": function(id) {
                return AbstractionProxy.create(id, {
                    Id.on("view2").start: Id.on(id).load()
                },"contents"); },
                "view2": function(id, elem) {
                return TestPresentation2.create(elem.querySelector(".control2"), id);} })
                .defineControls({
                "control2": function(id, widget) { return Control.create("control2", widget, this.get("view2", widget.elem), this.get("model2")); } });

                return widget2;
            },
        });
        app.start("widget1");
    });
</script>
<body>
<a href="#widget1">widget1</a>
<a href="#widget2">widget2</a>
<div id="containerElem"></div>
</body>
</html>